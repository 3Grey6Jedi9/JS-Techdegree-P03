// Providing life to the 'Activities Section'

const activities = document.getElementById('activities');
const activities_total_cost = document.getElementById('activities-cost');
let partial_costs = [];

activities.addEventListener('change', function(){
    const checkbox = event.target;
    const cost = parseInt(checkbox.dataset.cost)


    const restCheckboxes = Array.from(activities.getElementsByTagName('input')).filter(function(checkbox) {
      return checkbox.name !== 'all';
    });

    const mainCheckbox = activities.querySelector('input[name="all"]');

     if (checkbox.name === 'all') {

    restCheckboxes.forEach(function(checkbox) {
      if (checkbox.checked === true) {
        checkbox.checked = false;


      }
    });

    activities_total_cost.innerHTML = `Total: $${cost}`;

  } else {

         mainCheckbox.checked = false;
         const eventDate = checkbox.nextElementSibling.nextElementSibling;
         restCheckboxes.forEach(function(otherCheckbox){

             if (checkbox !== otherCheckbox) {

                 if (eventDate.textContent === otherCheckbox.nextElementSibling.nextElementSibling.textContent){

                     otherCheckbox.checked = false;

                 }

             }

         })

         restCheckboxes.forEach(function(otherCheckbox) {

             let partialCost = parseInt(otherCheckbox.dataset.cost)

             if (otherCheckbox.checked) {

                 partial_costs.push(partialCost)


             }


         })

         let sum = 0;
         for (let i=0; i<partial_costs.length; i++) {

        sum += partial_costs[i];

    }

          activities_total_cost.innerHTML = `Total: $${sum}`;
          partial_costs = [];
     }
});


// End of the activities section